---
const current = Astro.url.pathname;
const active = (p: string) => current === p || current.startsWith(p + "/");
---



<header class="site-header">
  <nav class="nav">
    <a class:list={["nav-link", active("/entries/notebook") && "active"]} href="/entries/notebook">Notebook</a>
    <a class:list={["nav-link", active("/entries/sketchbook") && "active"]} href="/entries/sketchbook">Sketchbook</a>
    <a class:list={["nav-link", active("/entries/project") && "active"]} href="/entries/project">Projects</a>
    <a class:list={["nav-link", active("/entries/essay") && "active"]} href="/entries/essay">Essays</a>
    <a class:list={["nav-link", active("/entries/fiction") && "active"]} href="/entries/fiction">Fiction</a>

    <button id="themeToggle" class="theme-btn" type="button" aria-label="Toggle dark mode">☾</button>
  </nav>
</header>


<script is:inline>
  const key = "theme";
  const root = document.documentElement;
  const btn = document.getElementById("themeToggle");

  const saved = localStorage.getItem(key);
  if (saved === "dark") root.classList.add("dark");
  if (saved === "light") root.classList.remove("dark");

  function syncIcon() {
    const isDark = root.classList.contains("dark");
    btn.textContent = isDark ? "☀" : "☾";
  }
  syncIcon();

  btn.addEventListener("click", () => {
    root.classList.toggle("dark");
    localStorage.setItem(key, root.classList.contains("dark") ? "dark" : "light");
    syncIcon();
  });
</script>
