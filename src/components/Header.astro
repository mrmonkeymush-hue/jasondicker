---
const current = Astro.url.pathname;
---

<header class="site-header">
  <nav class="nav">
    <a class:list={["nav-link", current === "/" && "active"]} href="/">Home</a>
    <a class:list={["nav-link", current.startsWith("/ideas") && "active"]} href="/ideas">Ideas</a>
    <a class:list={["nav-link", current.startsWith("/articles") && "active"]} href="/articles">Articles</a>

    <button id="themeToggle" class="theme-btn" type="button" aria-label="Toggle dark mode">☾</button>
  </nav>
</header>

<script is:inline>
  const key = "theme";
  const root = document.documentElement;
  const btn = document.getElementById("themeToggle");

  const saved = localStorage.getItem(key);
  if (saved === "dark") root.classList.add("dark");
  if (saved === "light") root.classList.remove("dark");

  function syncIcon() {
    const isDark = root.classList.contains("dark");
    btn.textContent = isDark ? "☀" : "☾";
  }
  syncIcon();

  btn.addEventListener("click", () => {
    root.classList.toggle("dark");
    localStorage.setItem(key, root.classList.contains("dark") ? "dark" : "light");
    syncIcon();
  });
</script>
