---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const articles = (await getCollection("articles"))
  .filter(a => !a.data.draft)
  .sort((a,b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Articles">
  <h1>Articles</h1>
  <p>Long-form notes, research, and explanations.</p>

  <div class="grid">
    {articles.map(a => (
      <div class="card">
        <div class="pill">{a.data.date.toDateString()}</div>
        <h2 style="margin:10px 0 6px;">
          <a href={`/articles/${a.slug}`}>{a.data.title}</a>
        </h2>
        <p>{a.data.summary}</p>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          {(a.data.tags ?? []).map(t => <span class="pill">{t}</span>)}
        </div>
      </div>
    ))}
  </div>
</BaseLayout>
